package view.ihm;

import java.awt.*;
import java.util.ArrayList;
import java.util.Iterator;

import javax.swing.*;

import controller.JoueurController;

import java.util.List;

import model.EnumType.EnumDogme;
import model.EnumType.EnumOrigineDivinite;
import model.cards.Divinity;
import model.cards.Card;

public class ScrollerCard extends JPanel {

	JPanel panel;
	
	private final JScrollPane scroll;
	
	private ArrayList<PanelCarte> listeCartesGraphiques = new ArrayList<PanelCarte>();
	
    public ScrollerCard(List<Card> listeCartes) throws HeadlessException {
    	
    	panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));
//        panel.setPreferredSize(new Dimension(800,150));
        panel.setBorder(BorderFactory.createLineBorder(Color.red));
        scroll = new JScrollPane(panel);

        setLayout(new BorderLayout());
        add(scroll, BorderLayout.CENTER);
        
        Iterator<Card> it = listeCartes.iterator();
        
        while (it.hasNext()){
        	PanelCarte panelCarte = new PanelCarte(it.next());
        	panel.add(panelCarte);
        	listeCartesGraphiques.add(panelCarte);
        	panel.add(Box.createRigidArea(new Dimension(5,0)));
        }
        panel.revalidate();
        scroll.revalidate();
    }
    
    //Permet de mettre à jour le panel de carte en fonction de la liste de carte passé en paramètre
    public void majCarte(List<Card> cartes){
    	listeCartesGraphiques.clear();
    	panel.removeAll();
    	Iterator<Card> it = cartes.iterator();
    	while (it.hasNext()){
        	PanelCarte panelCarte = new PanelCarte(it.next());
        	panel.add(panelCarte);
        	listeCartesGraphiques.add(panelCarte);
        	panel.add(Box.createRigidArea(new Dimension(5,0)));
        }
    	panel.revalidate();
        scroll.revalidate();
    }
    
    public void activateSelection(JoueurController controller){
    	Iterator<PanelCarte> it = listeCartesGraphiques.iterator();
    	while(it.hasNext()){
    		it.next().activateSuppression(controller);
    	}
    	suppressionActivated = true;
    }
}