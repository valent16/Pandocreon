package model.game;

import java.util.Iterator;
import java.util.List;

import controller.ObserverDe;
import model.EnumType.EnumCosmogonie;

public class De implements IObservableDe {
	/**Liste des observers du de*/
	private List<ObserverDe> observersDe;
	
	/**Attribut representant un singleton pour avoir un unique de*/
	private volatile static De de;
	
	/**Attribut representant la face du de*/
	private EnumCosmogonie face;
	
	/**Constructeur*/
	private De(){}

	/**Méthode permetttant d'avoir qu'une seule instance de De
	 * @return de le De de la classe
	 */
	public static synchronized De getInstanceDe(){
		if (de == null){
			synchronized (De.class){ //pour gerer le multi-thread
				if (de == null) 
					de = new De();
			}
		}
		return de;
	}

	/**Méthode permettant de lancer de maniere random un Dé pour obtenir une face*/
	public void lancerDe(){
		int random = (int) (Math.random() * 3 + 1);
		if(random == 1){
			de.face = EnumCosmogonie.JOUR;
		}
		if(random == 2 ){
			de.face = EnumCosmogonie.NUIT;
		}
		if(random == 3 ){
			de.face = EnumCosmogonie.NEANT;
		}
		
		Iterator<ObserverDe> it = observersDe.iterator();
		while (it.hasNext()){
			it.next().notify();
		}
	}

	/**Getter origine sur lequel le dé est retombé
	 * @return la face du De
	 */
	public EnumCosmogonie getFace(){
		return face;
	}
	
	/**Setter origne du de
	 * @param face la nouvelle face du De
	 */
	public void setFace(EnumCosmogonie face){
		this.face = face;
	}

	@Override
	public void notifyChangementFace() {
		// TODO Auto-generated method stub
		
	}
}
